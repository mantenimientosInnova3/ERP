{% extends "compras/base.html" %}

{% block title %}Requisiciones Pendientes{% endblock %}

{% block content %}
<h2>Requisiciones pendientes de autorización</h2>

<table border="1">
    <tr>
        <th>Consecutivo</th>
        <th>Usuario</th>
        <th>Fecha</th>
        <th>Área</th>
        <th>Centro de costo</th>
        <th>Estado</th>
        <th>Acciones</th>
    </tr>
    {% for req in requisiciones %}
    <tr>
        <td>{{ req.consecutivo }}</td>
        <td>{{ req.usuario.username }}</td>
        <td>{{ req.fecha }}</td>
        <td>{{ req.area }}</td>
        <td>{{ req.centro_costo }}</td>
        <td>{{ req.get_estado_display }}</td>
        <td>
            <a href="{% url 'detalle_requisicion' req.id %}">Ver</a>
            {% if req.estado == "PENDIENTE" %}
                <a href="{% url 'aprobar_requisicion' req.id %}">Aprobar</a> |
                <a href="{% url 'rechazar_requisicion' req.id %}">Rechazar</a>
            {% elif req.estado == "APROBADA" %}
                <a href="{% url 'generar_orden_de_requisicion' req.id %}">Generar OC</a>
            {% else %}
                -
            {% endif %}
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="6">No hay requisiciones pendientes.</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
